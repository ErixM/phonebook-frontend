{"version":3,"sources":["components/filter.js","components/form.js","components/persons.js","services/axiFunctions.js","components/notification.js","App.js","index.js"],"names":["Filter","filterHandler","onChange","AddPersonForm","addContact","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","placeholder","value","onClick","type","Persons","persons","removeFunction","map","person","key","name","number","style","borderRadius","paddingTop","margin","border","background","id","baseUrl","axios","get","then","response","data","post","put","delete","Notification","message","className","App","useState","setPersons","setNewName","setNewNumber","filtered","setFiltered","successMessage","setSuccessMessage","errorMessage","setErrorMessage","clearErrorMessage","setTimeout","clearSuccessMessage","useEffect","axiFunctions","returnedPersons","e","filter","toUpperCase","includes","target","event","preventDefault","contact","length","some","window","confirm","personToUpdate","find","catch","error","JSON","stringify","updateContact","concat","console","log","personToDelete","deleteIsConfirmed","ReactDOM","render","document","getElementById"],"mappings":"2NAQeA,EANA,SAAC,GAAD,IAAGC,EAAH,EAAGA,cAAH,OACb,mDACqB,2BAAOC,SAAUD,MC6BzBE,EA/BO,SAAC,GAMhB,IALLC,EAKI,EALJA,WACAC,EAII,EAJJA,QACAC,EAGI,EAHJA,iBACAC,EAEI,EAFJA,UACAC,EACI,EADJA,mBAEA,OACE,0BAAMC,SAAUL,GACd,qCACQ,IACN,2BACEM,YAAY,YACZC,MAAON,EACPH,SAAUI,KAGd,uCACU,IACR,2BACEI,YAAY,cACZC,MAAOJ,EACPL,SAAUM,KAGd,4BAAQI,QAASR,EAAYS,KAAK,UAAlC,SCPSC,EAlBC,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAASC,EAAZ,EAAYA,eAAZ,OACdD,EAAQE,KAAI,SAACC,GAAD,OACV,yBAAKC,IAAKD,EAAOE,MACdF,EAAOE,KADV,IACiBF,EAAOG,OACtB,4BACEC,MAAO,CACLC,aAAc,MACdC,WAAY,MACZC,OAAQ,MACRC,OAAQ,iBACRC,WAAY,QAEdf,QAAS,kBAAMI,EAAeE,EAAOU,MARvC,e,gBCJAC,EAAU,eAqBD,EAnBO,WAEpB,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAACC,GAAD,OAAcA,EAASC,SAiB9B,EAdM,SAAChB,GAEpB,OADgBY,IAAMK,KAAKN,EAASX,GACrBc,MAAK,SAACC,GAAD,OAAcA,EAASC,SAY9B,EATM,SAACN,EAAIV,GAExB,OADgBY,IAAMM,IAAN,UAAaP,EAAb,YAAwBD,GAAMV,GAC/Bc,MAAK,SAACC,GAAD,OAAcA,EAASC,SAO9B,EALM,SAACN,GAEpB,OADgBE,IAAMO,OAAN,UAAgBR,EAAhB,YAA2BD,IAC5BI,MAAK,SAACC,GAAD,OAAcA,EAASC,SCX9BI,EAPM,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,QAAS1B,EAAW,EAAXA,KAC/B,OAAgB,OAAZ0B,EACK,KAEF,yBAAKC,UAAW3B,GAAO0B,IC6JjBE,EA5JH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACT3B,EADS,KACA4B,EADA,OAEcD,mBAAS,IAFvB,mBAETrC,EAFS,KAEAuC,EAFA,OAGkBF,mBAAS,IAH3B,mBAGTnC,EAHS,KAGEsC,EAHF,OAIgBH,mBAAS,IAJzB,mBAITI,EAJS,KAICC,EAJD,OAK4BL,mBAAS,MALrC,mBAKTM,EALS,KAKOC,EALP,OAMwBP,mBAAS,MANjC,mBAMTQ,EANS,KAMKC,EANL,KAQVC,EAAoB,WACxB,OAAOC,YAAW,WAChBF,EAAgB,QACf,MAECG,EAAsB,WAC1B,OAAOD,YAAW,WAChBJ,EAAkB,QACjB,MAMLM,qBAAU,WACRC,IAA6BxB,MAAK,SAACyB,GACjCV,EAAYU,GACZd,EAAWc,QAEZ,IA4GH,OACE,oCACE,yCACA,kBAAC,EAAD,CAAclB,QAASS,EAAgBnC,KAAM,YAC7C,kBAAC,EAAD,CAAc0B,QAASW,EAAcrC,KAAM,UAC3C,kBAAC,EAAD,CAAQZ,cAbW,SAACyD,GACtBX,EACEhC,EAAQ4C,QAAO,SAACzC,GAAD,OACbA,EAAOE,KAAKwC,cAAcC,SAASH,EAAEI,OAAOnD,MAAMiD,sBAWpD,kBAAC,EAAD,CACExD,WAxEc,SAAC2D,GACnBA,EAAMC,iBACN,IAAMC,EAAU,CACd7C,KAAMf,EACNgB,OAAQd,GAOL0D,EAAQ5C,OAGF4C,EAAQ7C,KAAK8C,OAAS,GAC/Bf,EAAgB,sCAChBC,KACSa,EAAQ5C,OAAO6C,OAAS,GACjCf,EAAgB,wCAChBC,KAEArC,EAAQoD,MACN,SAACjD,GAAD,OAAYA,EAAOE,KAAKwC,gBAAkBvD,EAAQuD,kBAfpDQ,OAAOC,QAAP,UACKJ,EAAQ7C,KADb,+DAjCkB,SAAC6C,GACrB,IAAMK,EAAiBxB,EAASyB,MAAK,SAACrD,GAAD,OAAYA,EAAOE,OAASf,KACjEmD,EACgBc,EAAe1C,GAAIqC,GAChCjC,MAAK,WACJwB,IAEGxB,MAAK,SAACC,GACLc,EAAYd,GACZgB,EAAkB,GAAD,OAAI5C,EAAJ,8BACjBiD,OAEDkB,OAAM,WACLrB,EAAgB,mBAAD,OACMmB,EAAelD,KADrB,yCAGfgC,UAGLoB,OAAM,SAACC,GACNtB,EAAgB,GAAD,OAAIuB,KAAKC,UAAUF,EAAMxC,SAASC,QACjDkB,OAEJR,EAAW,IACXC,EAAa,IA4BX+B,CAAcX,GAnEC,SAACA,GAClBT,EACgBS,GACbjC,MAAK,SAACiC,GACLlB,EAAYhC,EAAQ8D,OAAOZ,IAC3BtB,EAAW5B,EAAQ8D,OAAOZ,IAC1BhB,EAAkB,GAAD,OAAIgB,EAAQ7C,KAAZ,8BACjBkC,OAEDkB,OAAM,SAACC,GACNK,QAAQC,IAAIN,EAAMxC,SAASC,SAE/BU,EAAW,IACXC,EAAa,IAwDXzC,CAAW6D,IAhBXd,EAAgB,2BAChBC,MA6DE/C,QAASA,EACTC,iBAxBmB,SAACyD,GACxBnB,EAAWmB,EAAMD,OAAOnD,QAwBpBJ,UAAWA,EACXC,mBAvBqB,SAACkD,GAC1Bb,EAAaa,EAAEI,OAAOnD,UAwBpB,uCACA,kBAAC,EAAD,CAASI,QAAS+B,EAAU9B,eAjDV,SAACY,GACrB,IAAMoD,EAAiBlC,EAASyB,MAAK,SAACrD,GAAD,OAAYA,EAAOU,KAAOA,MAnFvC,SAACoD,GAAD,OACxBZ,OAAOC,QAAP,0CAAkDW,EAAe5D,KAAjE,OAmFI6D,CAAkBD,IACpBxB,EACgBwB,EAAepD,IAC5BI,MAAK,WACJe,EAAYD,EAASa,QAAO,SAACzC,GAAD,OAAYA,EAAOU,KAAOA,MACtDe,EAAWG,EAASa,QAAO,SAACzC,GAAD,OAAYA,EAAOU,KAAOA,MACrDuB,EAAgB,IAAD,OAAK6B,EAAe5D,KAApB,eACfgC,OAEDoB,OAAM,WACLrB,EAAgB,oBAAD,OACO6B,EAAe5D,KADtB,oCAGfgC,UAoBN,QC1IJ8B,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.c6253b38.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ filterHandler }) => (\r\n  <div>\r\n    filter shown with: <input onChange={filterHandler} />\r\n  </div>\r\n);\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst AddPersonForm = ({\r\n  addContact,\r\n  newName,\r\n  handleNameChange,\r\n  newNumber,\r\n  handleNumberChange,\r\n}) => {\r\n  return (\r\n    <form onSubmit={addContact}>\r\n      <div>\r\n        name:{\" \"}\r\n        <input\r\n          placeholder=\"name here\"\r\n          value={newName}\r\n          onChange={handleNameChange}\r\n        />\r\n      </div>\r\n      <div>\r\n        number:{\" \"}\r\n        <input\r\n          placeholder=\"number here\"\r\n          value={newNumber}\r\n          onChange={handleNumberChange}\r\n        />\r\n      </div>\r\n      <button onClick={addContact} type=\"submit\">\r\n        add\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\nexport default AddPersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ persons, removeFunction }) =>\r\n  persons.map((person) => (\r\n    <div key={person.name}>\r\n      {person.name} {person.number}\r\n      <button\r\n        style={{\r\n          borderRadius: \"4px\",\r\n          paddingTop: \"2px\",\r\n          margin: \"2px\",\r\n          border: \"2px solid blue\",\r\n          background: \"pink\",\r\n        }}\r\n        onClick={() => removeFunction(person.id)}\r\n      >\r\n        Delete\r\n      </button>\r\n    </div>\r\n  ));\r\nexport default Persons;\r\n","import axios from \"axios\";\r\n\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAllPersons = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst createPerson = (person) => {\r\n  const request = axios.post(baseUrl, person);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst updatePerson = (id, person) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, person);\r\n  return request.then((response) => response.data);\r\n};\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getAllPersons, createPerson, updatePerson, deletePerson };\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message, type }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n  return <div className={type}>{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Filter from \"./components/filter\";\r\nimport AddPersonForm from \"./components/form\";\r\nimport Persons from \"./components/persons\";\r\nimport axiFunctions from \"./services/axiFunctions\";\r\nimport Notification from \"./components/notification\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [filtered, setFiltered] = useState([]);\r\n  const [successMessage, setSuccessMessage] = useState(null);\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  const clearErrorMessage = () => {\r\n    return setTimeout(() => {\r\n      setErrorMessage(null);\r\n    }, 3000);\r\n  };\r\n  const clearSuccessMessage = () => {\r\n    return setTimeout(() => {\r\n      setSuccessMessage(null);\r\n    }, 3000);\r\n  };\r\n\r\n  const deleteIsConfirmed = (personToDelete) =>\r\n    window.confirm(`Are you sure you want to delete ${personToDelete.name}?`);\r\n\r\n  useEffect(() => {\r\n    axiFunctions.getAllPersons().then((returnedPersons) => {\r\n      setFiltered(returnedPersons);\r\n      setPersons(returnedPersons);\r\n    });\r\n  }, []);\r\n\r\n  const addContact = (contact) => {\r\n    axiFunctions\r\n      .createPerson(contact)\r\n      .then((contact) => {\r\n        setFiltered(persons.concat(contact));\r\n        setPersons(persons.concat(contact));\r\n        setSuccessMessage(`${contact.name}'s number added correctly`);\r\n        clearSuccessMessage();\r\n      })\r\n      .catch((error) => {\r\n        console.log(error.response.data);\r\n      });\r\n    setNewName(\"\");\r\n    setNewNumber(\"\");\r\n  };\r\n  const updateContact = (contact) => {\r\n    const personToUpdate = filtered.find((person) => person.name === newName);\r\n    axiFunctions\r\n      .updatePerson(personToUpdate.id, contact)\r\n      .then(() => {\r\n        axiFunctions\r\n          .getAllPersons()\r\n          .then((response) => {\r\n            setFiltered(response);\r\n            setSuccessMessage(`${newName} number updated correctly`);\r\n            clearSuccessMessage();\r\n          })\r\n          .catch(() => {\r\n            setErrorMessage(\r\n              `Couldn't update ${personToUpdate.name} because it has already been deleted`\r\n            );\r\n            clearErrorMessage();\r\n          });\r\n      })\r\n      .catch((error) => {\r\n        setErrorMessage(`${JSON.stringify(error.response.data)}`);\r\n        clearErrorMessage();\r\n      });\r\n    setNewName(\"\");\r\n    setNewNumber(\"\");\r\n  };\r\n  const addOrUpdate = (event) => {\r\n    event.preventDefault();\r\n    const contact = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n    const wantToUpdate = () =>\r\n      window.confirm(\r\n        `${contact.name} already added on the phonebook, do you want to update it?`\r\n      );\r\n\r\n    if (!contact.number) {\r\n      setErrorMessage(\"Please insert a number!\");\r\n      clearErrorMessage();\r\n    } else if (contact.name.length < 3) {\r\n      setErrorMessage(\"Minimum required name length is 3!\");\r\n      clearErrorMessage();\r\n    } else if (contact.number.length < 8) {\r\n      setErrorMessage(\"Minimum required number length is 8!\");\r\n      clearErrorMessage();\r\n    } else if (\r\n      persons.some(\r\n        (person) => person.name.toUpperCase() === newName.toUpperCase()\r\n      ) &&\r\n      wantToUpdate()\r\n    ) {\r\n      updateContact(contact);\r\n    } else {\r\n      addContact(contact);\r\n    }\r\n  };\r\n  const removeContact = (id) => {\r\n    const personToDelete = filtered.find((person) => person.id === id);\r\n    if (deleteIsConfirmed(personToDelete)) {\r\n      axiFunctions\r\n        .deletePerson(personToDelete.id)\r\n        .then(() => {\r\n          setFiltered(filtered.filter((person) => person.id !== id));\r\n          setPersons(filtered.filter((person) => person.id !== id));\r\n          setErrorMessage(`\"${personToDelete.name}\" deleted!`);\r\n          clearErrorMessage();\r\n        })\r\n        .catch(() => {\r\n          setErrorMessage(\r\n            ` Couldn't delete ${personToDelete.name} as it has already been deleted`\r\n          );\r\n          clearErrorMessage();\r\n        });\r\n    }\r\n  };\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n  const handleNumberChange = (e) => {\r\n    setNewNumber(e.target.value);\r\n  };\r\n  const filterContacts = (e) => {\r\n    setFiltered(\r\n      persons.filter((person) =>\r\n        person.name.toUpperCase().includes(e.target.value.toUpperCase())\r\n      )\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1>Phonebook</h1>\r\n      <Notification message={successMessage} type={\"success\"} />\r\n      <Notification message={errorMessage} type={\"error\"} />\r\n      <Filter filterHandler={filterContacts} />\r\n      <AddPersonForm\r\n        addContact={addOrUpdate}\r\n        // addContact={addContact}\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons persons={filtered} removeFunction={removeContact} />\r\n      ...\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}